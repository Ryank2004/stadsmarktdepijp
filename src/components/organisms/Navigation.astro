---
import Button from "@atoms/Button.astro";
---

<div class="secondairy-nav">
    <div class="container">
        <div class="row">
            <ul>
                <li class="s-icon" data-link-status="not-active">
                    <a
                        class="s-icon-click s-icon-hover"
                        href="/"
                        aria-label="Instagram"
                    >
                        <div class="overlay s-icon-shadow"></div>
                        <div class="s-icon-content">
                            <div class="overlay s-icon-fill"></div>
                            <div class="s-icon-text">
                                <i>
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 448 512"
                                        aria-hidden="true"
                                        focusable="false"
                                    >
                                        <path
                                            d="M224.3 141a115 115 0 1 0 -.6 230 115 115 0 1 0 .6-230zm-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1 -.6-149.2zm93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1 -53.6 0zm129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"
                                        ></path></svg
                                    ></i
                                >
                                <i class="duplicate">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 448 512"
                                        aria-hidden="true"
                                        focusable="false"
                                    >
                                        <path
                                            d="M224.3 141a115 115 0 1 0 -.6 230 115 115 0 1 0 .6-230zm-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1 -.6-149.2zm93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1 -53.6 0zm129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"
                                        ></path></svg
                                    ></i
                                >
                            </div>
                        </div>
                    </a>
                </li>

                <li class="s-icon" data-link-status="not-active">
                    <a
                        class="s-icon-click s-icon-hover"
                        href="/"
                        aria-label="Facebook"
                    >
                        <div class="overlay s-icon-shadow"></div>
                        <div class="s-icon-content">
                            <div class="overlay s-icon-fill"></div>
                            <div class="s-icon-text facebook">
                                <i>
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 640 640"
                                        aria-hidden="true"
                                        focusable="false"
                                        ><path
                                            d="M160 96C124.7 96 96 124.7 96 160L96 480C96 515.3 124.7 544 160 544L258.2 544L258.2 398.2L205.4 398.2L205.4 320L258.2 320L258.2 286.3C258.2 199.2 297.6 158.8 383.2 158.8C399.4 158.8 427.4 162 438.9 165.2L438.9 236C432.9 235.4 422.4 235 409.3 235C367.3 235 351.1 250.9 351.1 292.2L351.1 320L434.7 320L420.3 398.2L351 398.2L351 544L480 544C515.3 544 544 515.3 544 480L544 160C544 124.7 515.3 96 480 96L160 96z"
                                        ></path></svg
                                    ></i
                                >
                                <i class="duplicate">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 640 640"
                                        aria-hidden="true"
                                        focusable="false"
                                        ><path
                                            d="M160 96C124.7 96 96 124.7 96 160L96 480C96 515.3 124.7 544 160 544L258.2 544L258.2 398.2L205.4 398.2L205.4 320L258.2 320L258.2 286.3C258.2 199.2 297.6 158.8 383.2 158.8C399.4 158.8 427.4 162 438.9 165.2L438.9 236C432.9 235.4 422.4 235 409.3 235C367.3 235 351.1 250.9 351.1 292.2L351.1 320L434.7 320L420.3 398.2L351 398.2L351 544L480 544C515.3 544 544 515.3 544 480L544 160C544 124.7 515.3 96 480 96L160 96z"
                                        ></path></svg
                                    ></i
                                >
                            </div>
                        </div>
                    </a>
                </li>
            </ul>

            <div class="text-link" data-link-status="not-active">
                <a class="link-click" href="/" aria-label="Contact">
                    <div class="link-content">
                        <div class="link-text">
                            <span class="label">Contact</span>
                            <span class="duplicate">Contact</span>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>

<nav class="main-nav container">
    <div class="link hamburger">
        <div class="link-click link-hover" data-navigation-toggle="toggle">
            <div class="link-content">
                <div class="stripes">
                    <div class="stripe"></div>
                    <div class="stripe"></div>
                    <div class="stripe"></div>
                    <div class="stripe"></div>
                </div>
                <div class="link-text">
                    <span class="label">Menu</span>
                    <span class="duplicate">Menu</span>
                </div>
            </div>
        </div>
    </div>

    <div class="nav-logo">
        <a href="/">
            <img src="/images/logo.svg" alt="Stadsmarkt de Pijp" />
        </a>
    </div>

    <div class="nav-button">
        <Button />
    </div>
</nav>

<div class="menu-overlay" id="menu-overlay">
    <div class="menu-popup">
        <button class="menu-close" id="menu-close" aria-label="Sluit menu"
            ><svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-6"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
                ></path>
            </svg>
        </button>

        <ul class="menu-list">
            <li class="link">
                <a class="link-click link-hover" href="/" aria-label="Contact">
                    <div class="link-content">
                        <div class="link-text">
                            <span class="label">Home</span>
                            <span class="duplicate">Home</span>
                        </div>
                    </div>
                </a>
            </li>
            <li class="link">
                <a
                    class="link-click link-hover"
                    href="/leveranciers"
                    aria-label="Contact"
                >
                    <div class="link-content">
                        <div class="link-text">
                            <span class="label">Leveranciers</span>
                            <span class="duplicate">Leveranciers</span>
                        </div>
                    </div>
                </a>
            </li>
            <li class="link">
                <a
                    class="link-click link-hover"
                    href="/ons-team"
                    aria-label="Contact"
                >
                    <div class="link-content">
                        <div class="link-text">
                            <span class="label"
                                >Ons <span class="title-spacing">t</span
                                >eam</span
                            >
                            <span class="duplicate"
                                >Ons <span class="title-spacing">t</span
                                >eam</span
                            >
                        </div>
                    </div>
                </a>
            </li>
            <li class="link">
                <a
                    class="link-click link-hover"
                    href="/contact"
                    aria-label="Contact"
                >
                    <div class="link-content">
                        <div class="link-text">
                            <span class="label"
                                >Con<span class="title-spacing">t</span
                                >act</span
                            >
                            <span class="duplicate"
                                >Con<span class="title-spacing">t</span
                                >act</span
                            >
                        </div>
                    </div>
                </a>
            </li>
        </ul>

        <div class="menu-button">
            <div class="text-link">
                <a class="link-click" href="/" aria-label="Contact">
                    <div class="link-content">
                        <div class="link-text">
                            <span class="label">Plan je route</span>
                            <span class="duplicate">Plan je route</span>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>

<style>
    .secondairy-nav {
        position: fixed;
        /* top: 0; */
        width: 100%;
        z-index: 1;
        background-color: var(--color-dark);
    }

    .secondairy-nav .row {
        display: flex;
        width: 100%;
        position: relative;
        justify-content: space-between;
        align-items: center;
        height: 30px;
        margin-bottom: 30px;
    }

    .secondairy-nav ul {
        display: flex;
        flex-direction: row;
    }

    .s-icon .s-icon-content .facebook i {
        height: 85%;
        width: 85%;
    }

    .secondairy-nav small {
        color: var(--color-light);
        letter-spacing: 0.5px;
        font-weight: 300;
    }

    .main-nav {
        position: fixed;
        display: flex; /* Flexbox in plaats van Grid! */
        justify-content: space-between; /* Menu links, button rechts */
        align-items: center; /* Alles verticaal centreren */
        height: 80px;
        background-color: var(--color-light);
        pointer-events: all;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 2;
        transform: translateY(1.9em);
        border-radius: 6vw 6vw 0 0;
        transition: all 0.5s cubic-bezier(0.33, 1.7, 0.55, 1);
    }

    .main-nav--pinned {
        transform: translateY(0);
    }

    .main-nav::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 3vw; /* Ruimte links */
        right: 3vw; /* Ruimte rechts */
        height: 2px;
        background-color: var(--color-dark);
    }

    .main-nav-items {
        display: flex;
        flex-direction: row;
        width: 100%;
        justify-content: space-between;
        align-items: center;
    }

    .main-nav .link.hamburger .stripes {
        width: 1em;
        height: 1em;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 4px;
        gap: 2px;
        flex-direction: column;
    }

    .main-nav .link.hamburger .stripes .stripe {
        width: 100%;
        display: block;
        height: 2px;
        background-color: var(--color-dark);
    }

    /* Logo - absolute positionering voor perfecte centrering en offset */
    .nav-logo {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        top: 20%; /* Logo lager zetten - pas dit percentage aan naar wens */
        /* Of gebruik een vaste waarde zoals: top: 35px; */
        z-index: 1000;
    }

    .nav-logo a {
        display: flex;
        align-items: center;
    }

    .nav-logo svg {
        display: block;
        width: 100px; /* Pas grootte aan indien nodig */
        height: auto;
    }

    /* === MENU POPUP === */
    .menu-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        justify-content: center;
        align-items: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.22s ease;
        z-index: 9999;
    }

    .menu-overlay.active {
        opacity: 1;
        pointer-events: all;
    }

    .menu-popup {
        background: var(--color-light);
        border-radius: 30px;
        padding: 32px 20px 20px;
        width: 85%;
        max-width: 320px;
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
        transform: translateY(30px);
        transition: all 0.5s cubic-bezier(0.33, 1.7, 0.55, 1);
    }

    .menu-overlay.active .menu-popup {
        transform: translateY(0);
    }

    /* Close knop (X) */
    .menu-close {
        position: absolute;
        top: 1.2rem;
        right: 1.4rem;
        width: 36px;
        height: 36px;
        font-size: 22px;
        cursor: pointer;
        color: var(--color-primary);
        background: none;
        border: none;
        transition:
            all 0.2s ease,
            color 0.2s ease;
    }

    .menu-close:hover {
        color: var(--color-dark);
    }

    /* Menu lijst */
    .menu-list {
        list-style: none;
        margin: 3rem 0 2rem;
        padding: 0;
        text-align: center;
        display: flex;
        flex-direction: column;
        gap: 1.2rem;
    }

    .menu-list li a span {
        font-family: "sale", sans-serif;
        text-decoration: none;
        text-transform: uppercase;
        color: var(--color-primary);
        font-size: 22px;
        padding-right: 3px;
    }

    .menu-list li a span .title-spacing {
        letter-spacing: -8px;
    }

    /* Knoppen onderaan */
    .menu-button {
        display: flex;
        flex-direction: column;
        /* gap: 1rem; */
    }

    .menu-button .link-click {
        display: inline-block;
        font-family: "sale", sans-serif;
        text-transform: uppercase;
        padding: 22px 12px;
        border: 2px solid var(--color-dark);
        background-color: white;
        border-radius: 20px;
        width: 100%;
    }

    .menu-button .link-text span {
        color: var(--color-dark);
        font-size: 18px;
    }
</style>

<script>
    // Hamburger menu functionaliteit
    const hamburger = document.querySelector("[data-navigation-toggle]");
    const overlay = document.getElementById("menu-overlay");
    const closeBtn = document.getElementById("menu-close");

    if (hamburger && overlay && closeBtn) {
        hamburger.addEventListener("click", () => {
            overlay.classList.add("active");
            document.body.style.overflow = "hidden"; // scroll blokkeren
        });

        closeBtn.addEventListener("click", () => {
            overlay.classList.remove("active");
            document.body.style.overflow = "";
        });

        // Sluit bij klik buiten popup
        overlay.addEventListener("click", (e) => {
            if (e.target === overlay) {
                overlay.classList.remove("active");
                document.body.style.overflow = "";
            }
        });
    }

    // Nav pinnen bij scrollen
    (function () {
        const nav = document.querySelector(".main-nav");
        if (!nav) return;

        const SCROLL_THRESHOLD = 200; // aantal pixels voordat nav pinned wordt

        const onScroll = () => {
            nav.classList.toggle(
                "main-nav--pinned",
                window.scrollY > SCROLL_THRESHOLD,
            );
        };

        onScroll();
        window.addEventListener("scroll", onScroll, { passive: true });
    })();
</script>
